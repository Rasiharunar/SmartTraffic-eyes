<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vehicle Counter</title>
</head>

<body>
    <h1>Vehicle Counter</h1>
    <div>
        <label for="youtube_url">YouTube Video URL:</label>
        <input type="text" id="youtube_url" placeholder="Enter YouTube URL">
        <button onclick="setSource()">Set Source</button>
    </div>
    <div>
        <img src="/video_feed" style="width: 100%; max-width: 800px; border: 1px solid black;" />
    </div>
    <button onclick="saveCounts()">Save Counts</button>

    <script>
        function setSource() {
            const youtubeUrl = document.getElementById( 'youtube_url' ).value;

            fetch( '/set_source', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify( {
                        youtube_url: youtubeUrl
                    } )
                } ).then( response => response.json() )
                .then( data => alert( data.message ) )
                .catch( error => alert( "Failed to set source: " + error ) );
        }

        function saveCounts() {
            const sessionName = prompt( "Enter session name:" );
            if ( sessionName ) {
                fetch( '/save_counts', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify( {
                            session_name: sessionName
                        } )
                    } ).then( response => response.json() )
                    .then( data => alert( data.message ) )
                    .catch( error => alert( "Failed to save counts: " + error ) );
            }
        }
    </script>
</body>

</html>